# Errordon Environment Configuration
# Copy to .env.production and fill in values

# Federation
LOCAL_DOMAIN=errordon.example.com
SINGLE_USER_MODE=false

# PostgreSQL
DB_HOST=db
DB_PORT=5432
DB_NAME=mastodon_production
DB_USER=mastodon
DB_PASS=

# Redis
REDIS_HOST=redis
REDIS_PORT=6379

# Secrets (generate with: rake secret)
SECRET_KEY_BASE=
OTP_SECRET=

# Web Push VAPID keys (generate with: rake mastodon:webpush:generate_vapid_key)
VAPID_PRIVATE_KEY=
VAPID_PUBLIC_KEY=

# Email (SMTP)
SMTP_SERVER=smtp.example.com
SMTP_PORT=587
SMTP_LOGIN=
SMTP_PASSWORD=
SMTP_FROM_ADDRESS=notifications@errordon.example.com

# Object Storage (optional, recommended for media)
S3_ENABLED=false
# S3_BUCKET=your-bucket
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# S3_REGION=eu-central-1
# S3_PROTOCOL=https
# S3_HOSTNAME=s3.eu-central-1.amazonaws.com

# ============================================================================
# ERRORDON CUSTOM SETTINGS (v0.3.0)
# ============================================================================

# Upload Limits (in bytes) - Set ERRORDON_UPLOAD_LIMITS=true to enable
ERRORDON_UPLOAD_LIMITS=false
MAX_VIDEO_SIZE=262144000
MAX_AUDIO_SIZE=262144000
MAX_IMAGE_SIZE=16777216

# Privacy Preset: 'strict' or 'standard'
# strict = unlisted default, no indexing, hide network
ERRORDON_PRIVACY_PRESET=standard
ERRORDON_DEFAULT_VISIBILITY=public
ERRORDON_DEFAULT_DISCOVERABLE=true
ERRORDON_DEFAULT_INDEXABLE=true
ERRORDON_DEFAULT_HIDE_NETWORK=false

# Transcoding Pipeline
ERRORDON_TRANSCODING_ENABLED=false
ERRORDON_TRANSCODE_720P=true
ERRORDON_TRANSCODE_480P=true
ERRORDON_DELETE_ORIGINALS=false

# Quota System
ERRORDON_QUOTA_ENABLED=false
ERRORDON_MAX_STORAGE_GB=10
ERRORDON_MAX_UPLOADS_HOUR=20
ERRORDON_MAX_DAILY_UPLOAD_GB=2

# Security (recommended: keep enabled)
ERRORDON_SECURITY_STRICT=true
ERRORDON_BLOCK_SUSPICIOUS_IPS=true
ERRORDON_AUDIT_FILE=true
# ERRORDON_AUDIT_WEBHOOK_URL=https://your-webhook.example.com

# Theme: 'matrix', 'default', or 'light'
ERRORDON_THEME=default

# ============================================================================
# NSFW-PROTECT AI MODERATION (v0.3.0)
# ============================================================================

# Enable AI-based content moderation
ERRORDON_NSFW_PROTECT_ENABLED=false

# Ollama Configuration (required when enabled)
ERRORDON_NSFW_OLLAMA_ENDPOINT=http://localhost:11434
ERRORDON_NSFW_OLLAMA_VISION_MODEL=llava
ERRORDON_NSFW_OLLAMA_TEXT_MODEL=llama3

# Admin email for alerts (CSAM, instance freeze, etc.)
ERRORDON_NSFW_ADMIN_EMAIL=

# Instance freeze when X alarms are active
ERRORDON_NSFW_ALARM_THRESHOLD=10

# Registration restrictions
ERRORDON_INVITE_ONLY=false
ERRORDON_REQUIRE_AGE_18=false

# ============================================================================
# MATRIX THEME (v0.3.0)
# ============================================================================

# Enable Matrix rain background effect
ERRORDON_MATRIX_THEME_ENABLED=false

# ============================================================================
# GDPR COMPLIANCE (v0.3.0)
# ============================================================================

# Data retention periods (in days) - set 0 to disable auto-cleanup
ERRORDON_GDPR_IP_RETENTION_DAYS=7
ERRORDON_GDPR_STRIKE_RETENTION_DAYS=365
ERRORDON_GDPR_AUDIT_RETENTION_DAYS=730

# ============================================================================
# SCHEDULED JOBS (Sidekiq Cron)
# ============================================================================
# These run automatically via Sidekiq:
# - Blocklist update: daily at 3:00 AM
# - GDPR cleanup: daily at 4:00 AM
# - Freeze cleanup: hourly
# - Weekly summary: Monday 9:00 AM (if ERRORDON_NSFW_ADMIN_EMAIL set)
